# ome-writers

[![License](https://img.shields.io/pypi/l/ome-writers.svg?color=green)](https://github.com/tlambert03/ome-writers/raw/main/LICENSE)
[![PyPI](https://img.shields.io/pypi/v/ome-writers.svg?color=green)](https://pypi.org/project/ome-writers)
[![Python
Version](https://img.shields.io/pypi/pyversions/ome-writers.svg?color=green)](https://python.org)
[![CI](https://github.com/tlambert03/ome-writers/actions/workflows/ci.yml/badge.svg)](https://github.com/tlambert03/ome-writers/actions/workflows/ci.yml)
[![codecov](https://codecov.io/gh/tlambert03/ome-writers/branch/main/graph/badge.svg)](https://codecov.io/gh/tlambert03/ome-writers)

OME-TIFF and OME-ZARR writer APIs designed for microscopy acquisition

## Installation

from github for now, including all extra dependencies (e.g. tifffile,
acquire-zarr, tensorstore, etc.):

```bash
pip install "ome-writers[all] @ git+https://github.com/tlambert03/ome-writers"
```

## Basic Usage

```python
from ome_writers import Dimension, create_stream

# Configure the dimensions of the data stream
# The stream expects that data will be appended in the order and shape
# defined by the dimensions.
# labels must currently be one of 't', 'c', 'z', 'y', 'x', or 'p' (stage position).
dims = [
    Dimension(label="t", size=10, unit=(1.0, "s")),
    Dimension(label="c", size=3),
    Dimension(label="z", size=5, unit=(1.0, "um")),
    Dimension(label="y", size=512, unit=(1.0, "um"), chunk_size=128),
    Dimension(label="x", size=512, unit=(1.0, "um"), chunk_size=128),
]

stream = create_stream(
    "my_data.zarr",
    dimensions=dims,
    dtype='uint16',
    # backend may be any of "acquire-zarr", "tensorstore", "tiff" (for ome-tiff) or "auto"
    backend="acquire-zarr"  
)

# Write data frame by frame, as it is generated by your application
for frame in ...:
    stream.append(frame)

# Flush any pending writes to disk
stream.flush()
```
